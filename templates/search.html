<!DOCTYPE html>
<html lang="en">
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <meta charset="utf-8">
  <title>Book Shelf</title>
    <style>
  body {
    background-color: #000000;
    margin: auto;
  }
     .fixed-color{
  color: #FFA500 !important;
}
        .fixed-back{
        background-color: #FFA500 !important;
  border-color: #FFA500 !important;}
</style>
</head>
<body>
<div class="d-flex flex-column gap-4">
    <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: #FFA500;">
  <!-- –ù–∞–∑–≤–∞ -->
  <h2 style="margin: 0;">üìö –¢–í–û–Ø<br> –ö–ù–ò–ñ–ö–û–í–ê<br> –ü–û–õ–ò–¶–Ø</h2>
  <!-- –Ü–∫–æ–Ω–∫–∞ —Å–ø—Ä–∞–≤–∞ -->
  <a href="/my_list">
    <img src="static/bookmark.svg" alt="icon" style="width: 30px; height: 30px;">
  </a>

</div>
    <form method="POST" action="/search">
    <div class="text-center">
    <input type="text" name="book" placeholder="–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É –∫–Ω–∏–∂–∫–∏">
        <button type="submit" class="btn btn-outline-warning fs-3 fixed-back">
    <img src="static/search.svg" alt="Search" width="24" height="24">
</button>
    </div>
    {% if books %}
<div class="container">
  <div class="row">
    {% for book in books %}
      <div class="col-md-3 mb-4"> <!-- 12 / 3 = 4 –∫–æ–ª–æ–Ω–∫–∏ -->
        <div class="card h-100">
          <div class="card-img-top d-flex align-items-center justify-content-center bg-light" style="height: 200px;">
  <img src="{{ book.thumbnail }}"
       alt="Book cover"
       onerror="this.style.display='none'; this.parentNode.innerHTML='<span class=\'text-muted\'>No cover</span>';">
</div>
          <div class="card-body">
            <h5 class="card-title">{{ book.name }}</h5>
            <p class="card-text">–ê–≤—Ç–æ—Ä: {{ book.author }}</p>
            <a href="#" class="btn btn-primary fixed-back">{{ book.description }}</a>
               <form method="POST" action="/add">
              <button type="button" class="btn btn-outline-warning fs-3"
        onclick="addBook('{{ book.name }}', '{{ book.author }}', '{{ book.description }}', '{{ book.thumbnail }}')">
    <img src="static/plus.svg" alt="–î–æ–¥–∞—Ç–∏" width="24" height="24">
</button>
                   </form>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
</div>
{% endif %}
        </form>
</div>
</body>
<script>
function addBook(name, author, description, thumbnail) {
    // –°—Ç–≤–æ—Ä—é—î–º–æ –æ–±'—î–∫—Ç –¥–ª—è –ø–µ—Ä–µ–¥–∞—á—ñ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
    const data = {
        name: name,
        author: author,
        description: description,
        thumbnail: thumbnail
    };

    fetch('/add', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'  // –ø–µ—Ä–µ–¥–∞—î–º–æ —è–∫ JSON
        },
        body: JSON.stringify(data)
    })
    .then(response => response.json())
    .then(result => {
        if (result.status === 'success') {
            alert('–ö–Ω–∏–≥–∞ –¥–æ–¥–∞–Ω–∞!'); // –∞–±–æ –º–æ–∂–Ω–∞ –¥–∏–Ω–∞–º—ñ—á–Ω–æ –¥–æ–¥–∞—Ç–∏ –∫–∞—Ä—Ç–∫—É –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É
        } else {
            alert('–°—Ç–∞–ª–∞—Å—è –ø–æ–º–∏–ª–∫–∞');
        }
    })
    .catch(error => console.error('Error:', error));
}
</script>

</html>